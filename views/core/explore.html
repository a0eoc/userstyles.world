<div class="wrapper py:l">
    <section class="mt:m ta:c">
        <h1>Explore</h1>
        <p class="fg:3">Browse all available userstyles.</p>
    </section>

    <section class="mt:l">
        <form class="form-wrapper plain advanced flex" method="get" action="/explore">
            <input type="text" name="page"
                value="{{ with .PageNow }}{{ . }}{{ else }}1{{ end }}" hidden>
            <div class="section flex ai:c ml:a mr:m">
                {{ template "partials/form-sort" . }}
            </div>

            <button
                type="submit"
                class="btn icon primary ml:m"
            >{{ template "icons/search" 16 }} Sort</button>
        </form>

        {{ if gt (len .Styles) 1 }}
            {{/* template "partials/debug-styles" . */}}
            <div class="grid flex rwrap mx:r mt:m">
                {{ range .Styles }}
                    {{ template "partials/style-card" . }}
                {{ end }}
            </div>
        {{ else }}
            <p class="ta:c">No userstyles found.</p>
        {{ end }}
    </section>

    <section class="Pagination-wrapper mt:l mb:m flex jc:c ai:c">
        <div class="Pagination flex jc:c ai:c">
            {{ if not (eq .PageNow 1) }}
                <a class="Pagination-button min" href="{{ paginate 1 .Sort }}">1 — First</a>
            {{ end }}
            {{ if (gt (subtract .PageBack 1) "1") }}
                <div class="Pagination-ellipsis">…</div>
            {{ end }}
            {{ if not (or (eq .PageNow 1) (eq .PageBack 1)) }}
                <a class="Pagination-button back" href="{{ paginate .PageBack .Sort }}">{{ .PageBack }}</a>
            {{ end }}
            <div class="Pagination-active now">{{ .PageNow }}</div>
            {{ if not (or (eq .PageNow .PageMax) (eq .PageNext .PageMax)) }}
                <a class="Pagination-button next" href="{{ paginate .PageNext .Sort }}">{{ .PageNext }}</a>
            {{ end }}
            {{ if (gt (subtract .PageMax .PageNext) "1") }}
                <div class="Pagination-ellipsis">…</div>
            {{ end }}
            {{ if not (eq .PageNow .PageMax) }}
                <a class="Pagination-button max" href="{{ paginate .PageMax .Sort }}">{{ .PageMax }} — Last</a>
            {{ end }}
        </div>
    </section>
</div>
