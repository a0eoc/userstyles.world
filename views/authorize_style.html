<!DOCTYPE html>
<html lang="en">
    <head>
        {{ template "partials/head" . }}
    </head>
    <body>
        {{ template "partials/nav" . }}

        <main>
            <div class="wrapper py:l">
                {{ template "partials/alert" . }}

                <section class="styles mt:l">
                    <h2 class="sub-title td:d">Userstyles</h2>
                    {{ if ne (len .Styles) 0 }}
                        <p class="description">Please pick an existing style or a new style, that you'd like to link.</p>
                        <div class="grid  flex rwrap mx:r mt:m">
                            {{ range .Styles }}
                                {{- $method := printf "oauth/authorize_style?styleID=%d&token=%s&oauthID=%d" .ID $.SecureToken $.OAuth.ID -}}
                                <div class="card col gap animate bd:o">
                                    <div class="thumbnail">
                                        {{ template "partials/preview_image" . }}
                                    </div>
                                    <div class="flex cwrap px:m bd:t fg:1 py:m">
                                        <span class="f:h3 f:b my:0">{{- .Name -}}</span>
                                    </div>
                                    <form method="post" action="/{{ $method }}">
                                        <button class="flex btn primary" type="submit">Link style</button>
                                    </form>
                                </div>
                            {{ end }}
                        </div>
                    {{ else }}
                        {{ template "partials/new_style" }}
                    {{ end }}
                </section>
            </div>
        </main>

        {{ template "partials/footer" . }}
    </body>
</html>