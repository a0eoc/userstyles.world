"use strict";
(()=>{var T=Object.defineProperty;var v=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var L=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,a=(e,t)=>{for(var s in t||(t={}))A.call(t,s)&&L(e,s,t[s]);if(v)for(var s of v(t))C.call(t,s)&&L(e,s,t[s]);return e};var g=typeof MediaQueryList=="function"&&typeof MediaQueryList.prototype.addEventListener=="function";var S=e=>{document.documentElement.setAttribute("data-color-scheme",e)},i=matchMedia("(prefers-color-scheme: dark)"),c=()=>{i.matches?S("dark"):S("light")};function f(e){switch(e){case"follow-system":{c(),g?i.addEventListener("change",c):i.addListener(c);break}default:S(e),g?i.removeEventListener("change",c):i.removeListener(c);break}}function M(){let e=document.getElementById("share"),t=document.getElementById("btn-share");t&&t.addEventListener("click",()=>{e.select(),document.execCommand("copy"),e.blur(),t.classList.add("copied")})}var R=e=>{if(!(!e.data||!e.data.type))switch(e.data.type){case"usw-remove-stylus-button":document.querySelector("a#stylus").remove()}};window.addEventListener("message",R);function w(){window.dispatchEvent(new MessageEvent("message",{data:{type:"usw-ready"},origin:"https://userstyles.world"}))}var l={colorScheme:"follow-system"},d="user-preferences",o=null;function m(){if(o)return o;let e=localStorage.getItem(d);if(!e)return localStorage.setItem(d,JSON.stringify(l)),l;let t=b(JSON.parse(e),l);return o=a(a({},l),t),localStorage.setItem(d,JSON.stringify(o)),o}function B(e){o=a(a({},o),e),localStorage.setItem(d,JSON.stringify(o))}function b(e,t){let s={};return e==null||typeof e!="object"||Array.isArray(e)?null:(Object.keys(e).forEach(n=>{let r=e[n];if(r==null||t[n]==null)return;let h=Array.isArray(r),E=Array.isArray(t[n]);h||E?h&&E&&(s[n]=r):typeof r=="object"&&typeof t[n]=="object"?s[n]=b(r,t[n]):typeof r==typeof t[n]&&(s[n]=r)}),s)}var y="usr-settings";function I(e){!window.location.pathname.startsWith("/account")||(document.getElementById(`${y}--color-scheme`).value=e.colorScheme)}function U(e){let t=document.getElementById(`${y}--save`);t&&t.addEventListener("click",()=>{let s={};s.colorScheme=document.getElementById(`${y}--color-scheme`).value,B(s),e()})}var p=new Set,u=()=>document.readyState==="complete"||document.readyState==="interactive",x=e=>p.add(e);if(!u()){let e=()=>{u()&&(document.removeEventListener("readystatechange",e),p.forEach(t=>t()),p.clear())};document.addEventListener("readystatechange",e)}var O=()=>{M(),w(),U(N),I(m())};u()?O():x(O);var N=()=>{let e=m();f(e.colorScheme)};f(m().colorScheme);})();
